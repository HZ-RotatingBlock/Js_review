<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>运算符应用0</title>

        <style type="text/css">
            *{margin:0;padding:0;list-style:none;text-decoration:none;}
            ul{
                position:absolute;
                top:50%;
                left:50%;
                width:500px;
                transform:translate(-50%,-50%);
                -webkit-transform:translate(-50%,-50%);
            }
            li{
                margin-top:10px;
                margin-left:0;
                width:100%;
                height:40px;
                border-radius:3px;
                transition:all .3s;
                -webkit-transition:all .3s;
                cursor:pointer;
            }
            li:hover{
                transform:perspective(1000px) rotateY(30deg);
                -webkit-transform:perspective(1000px) rotateY(30deg);
            }
        </style>
    </head>
    <body>
       <ul>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
       </ul>

        <script type="text/javascript">
            window.onload = () => {
                var aLi = document.getElementsByTagName("li");
                var liLength = aLi.length;
                var arr = ["#c03","#333","#0073bc","green"];
                var arrLength = arr.length;
                //声明变量str用以存储鼠标滑过前的li样式
                var str = "";
                var prevIndex = 0;
                for(let i = 0;i < liLength;i++){
                    //建立索引值
                    aLi[i].index = i;
                    //巧妙利用取余给li赋予样式
                    aLi[i].style.backgroundColor = arr[i % arrLength];
                    
                    //鼠标滑过事件
                    //法一
                    // aLi[i].onmouseover = function(){
                    //     this.style.backgroundColor = "gray";
                    // }
                    // aLi[i].onmouseout = function(){
                    //     this.style.backgroundColor = arr[this.index % arrLength];
                    // }

                    //法二
                     aLi[i].onmouseover = function(){
                        str = this.style.backgroundColor;
                        this.style.backgroundColor = "gray";
                    }
                    aLi[i].onmouseout = function(){
                        if(this.style.backgroundColor != "black"){
                            this.style.backgroundColor = str;
                        }
                        
                    }

                    //点击对应li样式变化，其兄弟元素样式还原至被点击前
                    aLi[i].onclick = function(){
                        for(let value of aLi){
                            if(value.style.backgroundColor == "black"){
                                prevIndex = value.index;
                            }
                        }                      
                        this.style.backgroundColor = "black";
                        aLi[prevIndex].style.backgroundColor = arr[prevIndex % arrLength];
                    }


                }

            }

        </script>
    </body>
</html>
